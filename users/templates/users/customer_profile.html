{% extends 'main/base.html' %}

{% block title %}{{ user.username }}'s Profile{% endblock %}

{% block content %}
{% if profile.profile_image %}
  <img src="{{ profile.profile_image.url }}" alt="{{ user.username }}'s Profile Image" style="max-width: 150px; max-height: 150px; border-radius: 50%;">
{% else %}
  <p>No profile image available.</p>
{% endif %}
<p><a href="{% url 'users:update_profile_image' %}">Update Profile Image</a></p>

  <h1>{{ user.username }}'s Profile</h1>
  <p>Email: {{ user.email }}</p>
  <p>Date of Birth: {{ profile.birth }}</p>
  <h2>Available Services</h2>
  <ul>
    {% for service in available_services %}
      <li>
        <a href="{% url 'services:service_detail' service.id %}">{{ service.name }}</a> - {{ service.field }} - ${{ service.price_hour }} per hour
        <br>
        Provided by: <a href="{% url 'users:company_profile' username=service.company.user.username %}">{{ service.company.user.username }}</a>
        <br>
        <a href="{% url 'services:request_service' service.id %}" class="details-button">Request Service</a>
      </li>
    {% endfor %}
  </ul>
  <h2>Requested Services</h2>
  <ul>
    {% for request in requested_services %}
      <li>
        <a href="{% url 'services:service_detail' request.service.id %}">{{ request.service.name }}</a> - {{ request.service.field }} - ${{ request.service.price_hour }} per hour
        <br>
        Requested on: {{ request.date_requested }}
        <br>
        Provided by: <a href="{% url 'users:company_profile' username=request.service.company.user.username %}">{{ request.service.company.user.username }}</a>
        <br>
        Duration:{{request.service_time}} hours
        <br>
        Cost:€{{request.service_cost}}
      </li>
    {% endfor %}
  </ul>

  <h3>Total Spent: €{{total_cost}}</h3>
{% endblock %}