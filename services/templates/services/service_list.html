{% extends 'main/base.html' %}
{% load static %}

{% block content %}
<!-- Inside your service_list.html template -->
<link rel="stylesheet" type="text/css" href="{% static 'services/css/serviceslist.css' %}">

    {% for service in services %}
        <div class="service-item">
            <h2>{{ service.name }}</h2>
            <p>{{ service.description|truncatewords:20 }}</p>
            <p><strong>Field:</strong> {{ service.field }}</p>
            <p><strong>Created By:</strong>
                <!-- Clickable company link -->
                <a href="{% url 'users:company_profile' username=service.company.user.username %}">
                    {{ service.company.user.username }}
                </a>
            </p>

            <!-- Links to view service details -->
            <a href="{% url 'services:service_detail' service.id %}">View Details</a>

            <!-- Conditionally display the "Request Service" link for authenticated customers -->
            {% if user.is_authenticated and user.is_customer %}
                <a href="{% url 'services:request_service' service.id %}">Request Service</a>
            {% else %}
                <p><a href="{% url 'users:login_user' %}">Login to request service</a></p>
            {% endif %}
        </div>
    {% empty %}
        <p>No services available.</p>
    {% endfor %}
</div>

{% endblock %}
